(this["webpackJsonptopsis-react"]=this["webpackJsonptopsis-react"]||[]).push([[0],{115:function(e,t){},116:function(e){e.exports=JSON.parse('{"INSERTCRITERIA":"Insira os crit\xe9rios","INSERTDATASET":"Insira as alternativas","SEERESULTS":"Veja o resultado","TITLE":"TOPSIS React","BUTTON_NEXT":"Pr\xf3ximo","BUTTON_FINISH":"Finalizar","BUTTON_BACK":"Voltar","DATA_COLUMN_NAME":"Nome","DATA_COLUMN_CRITERION":"Crit\xe9rio","DATA_COLUMN_TYPE":"Tipo","DATA_COLUMN_WEIGHT":"Peso","CRITERION_TYPE_COST":"Custo","CRITERION_TYPE_BENEFIT":"Benef\xedcio","BUTTONS_REMOVE":"Remove","BUTTONS_LOAD":"Carregar","BUTTONS_ADD":"Adicionar","UNKNOWN_STEP":"Etapa desconhecida","ALL_STEPS_COMPLETED":"Todas as etapas completadas"}')},117:function(e){e.exports=JSON.parse('{"INSERTCRITERIA":"Insert your criteria","INSERTDATASET":"Insert your dataset","SEERESULTS":"See the results","TITLE":"TOPSIS React","BUTTON_NEXT":"Next","BUTTON_FINISH":"Finish","BUTTON_BACK":"Back","DATA_COLUMN_NAME":"Name","DATA_COLUMN_CRITERION":"Criterion","DATA_COLUMN_TYPE":"Type","DATA_COLUMN_WEIGHT":"Weight","CRITERION_TYPE_COST":"Cost","CRITERION_TYPE_BENEFIT":"Benefit","BUTTONS_REMOVE":"Remove","BUTTONS_LOAD":"Load","BUTTONS_ADD":"Add","UNKNOWN_STEP":"Unknown Step","ALL_STEPS_COMPLETED":"All steps completed"}')},176:function(e,t){},177:function(e,t){},178:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a(14),i=a.n(r),c=a(241),s=a(246),l=a(245),o=a(244),d=a(242),u=a(184),b=a(247),O=a(16),j=a(10),m=a(7),f=a(250),h=a(243),p=a(248),T=a(47),N=a(234),g=a(238),x=a(237),E=a(233),_=a(235),v=a(236),A=a(98),S=a(249),I=a(86),C=a(30),R=a(5),y=Object(C.a)((function(e){return{draggingItem:{background:"rgb(235,235,235)"}}}));function U(e){var t=Object(S.a)().t,a=y(),n=[{name:t("DATA_COLUMN_CRITERION"),attribute:"criterionName"},{name:t("DATA_COLUMN_TYPE"),attribute:"type"},{name:t("DATA_COLUMN_WEIGHT")+" (%)",attribute:"weight"},{name:t("BUTTONS_REMOVE")}];return Object(R.jsx)(I.a,{onDragEnd:e.handleOnDragEnd,children:Object(R.jsx)(E.a,{component:A.a,children:Object(R.jsxs)(N.a,{"aria-label":"a dense table",children:[Object(R.jsx)(_.a,{children:Object(R.jsx)(v.a,{children:n.map((function(e,t){return 0===t?Object(R.jsx)(x.a,{children:e.name},e.name):Object(R.jsx)(x.a,{align:"center",children:e.name},e.name)}))})}),Object(R.jsx)(I.c,{droppableId:"criteria-list",children:function(n){return Object(R.jsxs)(g.a,Object(j.a)(Object(j.a)({ref:n.innerRef},n.droppableProps),{},{children:[e.rows.map((function(n,r){return Object(R.jsx)(I.b,{draggableId:n.criterionName,index:r,children:function(i,c){return Object(R.jsxs)(v.a,Object(j.a)(Object(j.a)(Object(j.a)({ref:i.innerRef},i.draggableProps),i.dragHandleProps),{},{className:c.isDragging?a.draggingItem:"",children:[Object(R.jsx)(x.a,{component:"th",scope:"row",children:n.criterionName}),Object(R.jsx)(x.a,{align:"center",children:1===n.type?t("CRITERION_TYPE_COST"):t("CRITERION_TYPE_BENEFIT")}),Object(R.jsx)(x.a,{align:"center",children:n.weight}),Object(R.jsx)(x.a,{align:"center",children:Object(R.jsxs)(T.a,{variant:"contained",color:"secondary",onClick:function(){return e.removeRow(r)},children:[" ",t("BUTTONS_REMOVE")," "]})})]}))}},n.criterionName)})),n.placeholder]}))}})]})})})}var D=a(31),M=a(140),w=a(63),L=a(102),B=a(43),P=a(103),F=Object(C.a)((function(e){return{formControl:{margin:e.spacing(0,1),minWidth:150},button:{margin:e.spacing(1,0)},form:{margin:e.spacing(2,0)}}}));function k(e){var t={criterionName:"",weight:0,type:1},a=F(),r=Object(n.useState)(t),i=Object(m.a)(r,2),c=i[0],s=i[1],l=Object(S.a)().t,o=function(e){var t=e.target,a=t.name,n=t.value;s(Object(j.a)(Object(j.a)({},c),{},Object(D.a)({},a,n)))},d=c.criterionName,u=c.weight,O=c.type;return Object(R.jsxs)("form",{disabled:!0,className:a.form,onSubmit:function(a){a.preventDefault(),e.handleSubmit(c),s(t)},children:[Object(R.jsxs)(b.a,{display:"flex",flexDirection:"row",children:[Object(R.jsx)(M.a,{disabled:e.disabled,required:!0,name:"criterionName",className:a.input,label:l("DATA_COLUMN_CRITERION"),variant:"filled",value:d,onChange:o}),Object(R.jsxs)(w.a,{disabled:e.disabled,required:!0,className:a.formControl,variant:"filled",children:[Object(R.jsx)(P.a,{id:"label-type",children:l("DATA_COLUMN_TYPE")}),Object(R.jsxs)(L.a,{labelId:"label-type",name:"type",value:O,onChange:o,children:[Object(R.jsx)(B.a,{value:1,children:l("CRITERION_TYPE_COST")}),Object(R.jsx)(B.a,{value:2,children:l("CRITERION_TYPE_BENEFIT")})]})]}),Object(R.jsx)(M.a,{disabled:e.disabled,required:!0,className:a.input,type:"number",name:"weight",label:l("DATA_COLUMN_WEIGHT")+" (%)",variant:"filled",value:u,onChange:o})]}),Object(R.jsxs)(T.a,{disabled:e.disabled,className:a.button,type:"submit",variant:"contained",color:"primary",children:[" ",l("BUTTONS_ADD")," "]})]})}var G=a(125);function W(e){return Object(R.jsx)("div",{style:{width:"100%",height:300},children:Object(R.jsx)(G.a,{rows:e.dataset,columns:e.columns,pageSize:5,loading:e.loading})})}var Y=Object(C.a)((function(e){return{formControl:{margin:e.spacing(0,1),minWidth:150},input:{minWidth:100,margin:e.spacing(0,1)},button:{margin:e.spacing(1,1,1,0)},form:{margin:e.spacing(2,0)}}})),q=["xlsx","xlsb","xlsm","xls","xml","csv","txt","ods","fods","uos","sylk","dif","dbf","prn","qpw","123","wb*","wq*","html","htm"].map((function(e){return"."+e})).join(",");function H(e){var t={name:""};e.fields.forEach((function(e){t[e]=""}));var a=Y(),r=Object(n.useState)(t),i=Object(m.a)(r,2),c=i[0],s=i[1],l=Object(S.a)().t,o=function(t){var a=t.target,n=a.name,r=a.value;if("file-input"===n){var i=t.target.files;i&&i[0]&&e.handleFile(i[0])}else s(Object(j.a)(Object(j.a)({},c),{},Object(D.a)({},n,r)))};return Object(R.jsxs)("form",{className:a.form,onSubmit:function(a){a.preventDefault(),e.handleSubmit(c),s(t)},children:[Object(R.jsxs)(b.a,{display:"flex",flexDirection:"row",children:[Object(R.jsx)(M.a,{disabled:e.disabled,required:!0,name:"name",label:l("DATA_COLUMN_NAME"),variant:"filled",value:c.name,onChange:o}),e.fields.map((function(t,n){return Object(R.jsx)(M.a,{disabled:e.disabled,required:!0,className:a.input,type:"number",name:t,label:t,variant:"filled",value:c[t],onChange:o},n)}))]}),Object(R.jsxs)(T.a,{disabled:e.disabled,className:a.button,type:"submit",variant:"contained",color:"primary",children:[" ",l("BUTTONS_ADD")," "]}),Object(R.jsx)("input",{className:a.input,style:{display:"none"},type:"file",id:"raised-button-file",name:"file-input",accept:q,onChange:o}),Object(R.jsx)("label",{htmlFor:"raised-button-file",children:Object(R.jsx)(T.a,{disabled:e.disabled,variant:"contained",component:"span",color:"secondary",className:a.button,children:l("BUTTONS_LOAD")})})]})}var V=a(127);function J(e,t){var a,n=t.map((function(e){return e.weight})),r=function(e){return e.reduce((function(e,t){return t+e}))},i=e.map((function(t){return t.map((function(t,a){return t/Math.sqrt(function(t){return r(e.map((function(e){return Math.pow(e[t],2)})))}(a))}))})).map((function(e){return e.map((function(e,t){return n[t]*e}))})),c=[],s=[],l=Object(V.a)(t);try{var o=function(){var e=a.value,n=i.map((function(a){return a[t.indexOf(e)]})),r=Math.min.apply(Math,Object(O.a)(n)),l=Math.max.apply(Math,Object(O.a)(n));c.push(1===e.type?r:l),s.push(1===e.type?l:r)};for(l.s();!(a=l.n()).done;)o()}catch(b){l.e(b)}finally{l.f()}var d=i.map((function(e){return Math.sqrt(r(e.map((function(e,t){return Math.pow(c[t]-e,2)}))))})),u=i.map((function(e){return Math.sqrt(r(e.map((function(e,t){return Math.pow(s[t]-e,2)}))))})).map((function(e,t){return e/(d[t]+e)}));return Object(O.a)(u).sort().reverse().map((function(e){return u.indexOf(e)}))}function K(e){var t=[{field:"ranking",headerName:"#",type:"number",width:60},{field:"name",headerName:(0,Object(S.a)().t)("DATA_COLUMN_NAME"),width:160}],a=Object(n.useState)(!0),r=Object(m.a)(a,2),i=r[0],c=r[1],s=Object(n.useState)([]),l=Object(m.a)(s,2),o=l[0],d=l[1];return Object(n.useEffect)((function(){var t=e.criteria.map((function(e){return{name:e.criterionName,type:e.type,weight:parseFloat(e.weight/100)}})),a=J(e.dataset.map((function(e){return Object(O.a)(t.map((function(t){return e[t.name]})))})),t);setTimeout((function(){d(a.map((function(t,a){return{id:a,name:e.dataset[t].name,ranking:a+1}}))),c(!1)}),1e3)}),[e.criteria,e.dataset]),Object(R.jsx)(W,{loading:i,dataset:o,columns:t})}var z=a(95),X=a.n(z),Q=a(96),Z=a(62),$=a(116),ee=a(117),te=a(130);Q.a.use(te.a).use(Z.e).init({fallbackLng:"en",whitelist:["en","pt"],resources:{pt:{translation:$},en:{translation:ee}},debug:!0,interpolation:{escapeValue:!1}});var ae=Q.a;var ne=Object(C.a)((function(e){return{root:{margin:e.spacing(6,0,3),width:"100%"},button:{marginRight:e.spacing(1)},instructions:{marginTop:e.spacing(1),marginBottom:e.spacing(1)}}}));function re(e){var t=ne(),a=Object(S.a)().t,r=a("DATA_COLUMN_NAME"),i=Object(n.useState)({criteria:[],sum:0,disabledForm:!1,disableGrid:!0,disableResults:!0,dataset:[],loading:!1}),c=Object(m.a)(i,2),s=c[0],l=c[1],o=Object(n.useState)(0),d=Object(m.a)(o,2),N=d[0],g=d[1],x=["INSERTCRITERIA","INSERTDATASET","SEERESULTS"],E=function(e){var t=s.sum+parseInt(e.weight);l(Object(j.a)(Object(j.a)({},s),{},{criteria:[].concat(Object(O.a)(s.criteria),[Object(j.a)(Object(j.a)({},e),{},{weight:parseInt(e.weight)})]),sum:t,disabledForm:t>=100,disableGrid:!1}))},_=function(e){if(e.destination&&e.destination.index!==e.source.index){var t=function(e,t,a){var n=Array.from(e),r=n.splice(t,1),i=Object(m.a)(r,1)[0];return n.splice(a,0,i),n}(s.criteria,e.source.index,e.destination.index);l(Object(j.a)(Object(j.a)({},s),{},{criteria:t}))}},v=function(e,t){var a=Object(j.a)({},e);return a.name=a[r],delete a[r],Object(j.a)(Object(j.a)({},a),{},{name:a.name,id:t+s.dataset.length})},A=function(e){l(Object(j.a)(Object(j.a)({},s),{},{dataset:[].concat(Object(O.a)(s.dataset),[Object(j.a)(Object(j.a)({},e),{},{id:s.dataset.length})]),disableResults:!1}))},I=function(e){l(Object(j.a)(Object(j.a)({},s),{},{loading:!0}));var t=new FileReader,a=!!t.readAsBinaryString;t.onload=function(e){var t=e.target.result,n=X.a.read(t,{type:a?"binary":"array"}),r=n.SheetNames[0],i=n.Sheets[r],c=X.a.utils.sheet_to_json(i,{header:0});console.log(c.map(v)),l(Object(j.a)(Object(j.a)({},s),{},{dataset:c.map(v),disableResults:!1,loading:!1}))},a?t.readAsBinaryString(e):t.readAsArrayBuffer(e)},C=function(){if(0!==s.criteria.length){var e=JSON.parse(JSON.stringify(s.criteria)),t=e.length,a=e.map((function(e,a){return Math.random()*(t-a)+1e-4})),n=a.reduce((function(e,t){return e+t}),0);if(0===n){var r=Math.floor(100/e.length),i=100%e.length;return e.forEach((function(e,t){e.weight=r+(i>0?1:0),i>0&&i--})),void l(Object(j.a)(Object(j.a)({},s),{},{criteria:e,sum:100,disabledForm:!0}))}for(var c=e.map((function(e,t){var r=a[t]/n*100;return Math.round(r)})),o=100-c.reduce((function(e,t){return e+t}),0),d=0;d<Math.abs(o);d++){var u=d%c.length;if(o>0)c[u]++;else if(c[u]>0)c[u]--;else for(var b=0;b<c.length;b++){var O=(u+b+1)%c.length;if(c[O]>0){c[O]--;break}}}e.forEach((function(e,t){e.weight=c[t]})),l(Object(j.a)(Object(j.a)({},s),{},{criteria:e,sum:100,disabledForm:!0,disableGrid:!1}))}};var y=function(e){var t=s.sum-parseInt(s.criteria[e].weight);l(Object(j.a)(Object(j.a)({},s),{},{criteria:Object(O.a)(s.criteria.filter((function(t,a){return a!==e}))),sum:t,disabledForm:t>=100,disableGrid:0===t}))};return Object(R.jsxs)(b.a,{className:t.root,children:[Object(R.jsx)(f.a,{activeStep:N,children:x.map((function(e,t){return Object(R.jsx)(h.a,Object(j.a)(Object(j.a)({},{}),{},{children:Object(R.jsx)(p.a,Object(j.a)(Object(j.a)({},{}),{},{children:a(e)}))}),e)}))}),N===x.length?Object(R.jsxs)("div",{children:[Object(R.jsx)(u.a,{className:t.instructions,children:a("ALL_STEPS_COMPLETED")}),Object(R.jsx)(T.a,{onClick:function(){g(0)},className:t.button,children:"Reset"})]}):Object(R.jsxs)("div",{children:[Object(R.jsx)("div",{children:function(e){switch(e){case 0:return Object(R.jsxs)(b.a,{children:[Object(R.jsx)(U,{rows:s.criteria,removeRow:y,handleOnDragEnd:_}),Object(R.jsxs)(b.a,{mt:2,mb:2,children:[" ",Object(R.jsx)(T.a,{variant:"outlined",color:"secondary",className:t.button,onClick:C,disabled:0===s.criteria.length,children:"Randomize Weights"})]}),Object(R.jsx)(k,{disabled:s.disabledForm,handleSubmit:E})]});case 1:return Object(R.jsxs)(b.a,{children:[Object(R.jsx)(W,{dataset:s.dataset,disable:s.disableGrid,columns:(n=s.criteria,[{field:"name",headerName:ae.t("DATA_COLUMN_NAME"),width:200}].concat(Object(O.a)(n.map((function(e){return{field:e.criterionName,headerName:[].concat(Object(O.a)(e.criterionName[0].toUpperCase()),[e.criterionName.slice(1)]),type:"number",width:160}}))))),loading:s.loading}),Object(R.jsx)(H,{fields:s.criteria.map((function(e){return e.criterionName})),disabled:s.disableGrid,handleSubmit:A,handleFile:I})]});case 2:return Object(R.jsx)(b.a,{children:Object(R.jsx)(K,{dataset:s.dataset,disable:s.disableResults,criteria:s.criteria})});default:return Object(R.jsx)(u.a,{children:a("UNKNOWN_STEP")})}var n}(N)}),Object(R.jsxs)("div",{children:[Object(R.jsx)(T.a,{disabled:0===N,onClick:function(){g((function(e){return e-1}))},className:t.button,children:a("BUTTON_BACK")}),Object(R.jsx)(T.a,{variant:"contained",color:"primary",onClick:function(){g((function(e){return e+1}))},disabled:0===N&&s.disableGrid||1===N&&s.disableResults,className:t.button,children:N===x.length-1?a("BUTTON_FINISH"):a("BUTTON_NEXT")})]})]})]})}var ie=Object(C.a)((function(e){return{root:{flexGrow:1},title:{flexGrow:1,textAlign:"center"}}}));var ce=function(){var e=ie(),t=Object(S.a)().t;return Object(R.jsxs)(b.a,{className:e.root,children:[Object(R.jsx)(o.a,{position:"static",children:Object(R.jsx)(d.a,{children:Object(R.jsx)(n.Suspense,{fallback:"loading...",children:Object(R.jsx)(u.a,{variant:"h6",className:e.title,component:"h1",children:t("TITLE")})})})}),Object(R.jsx)(l.a,{maxWidth:"md",children:Object(R.jsx)(re,{})})]})},se=a(85),le=a(50),oe=Object(le.a)({palette:{primary:{main:"#2364AA"},secondary:{main:"#3DA5D9"},error:{main:se.a.A400},background:{default:"#fff"}}});i.a.render(Object(R.jsxs)(c.a,{theme:oe,children:[Object(R.jsx)(s.a,{}),Object(R.jsx)(n.Suspense,{fallback:null,children:Object(R.jsx)(ce,{})})]}),document.querySelector("#root"))}},[[178,1,2]]]);
//# sourceMappingURL=main.3c31abbc.chunk.js.map